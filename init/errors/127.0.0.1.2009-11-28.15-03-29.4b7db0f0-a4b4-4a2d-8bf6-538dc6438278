(dp1
S'output'
p2
S''
sS'layer'
p3
S'/home/dave/web2py/applications/init/controllers/audio_links.py'
p4
sS'code'
p5
S'import gluon.contrib.simplejson as sj\n\ndef index(): \n    search = request.args[0]\n    # get the links that corispond to this audio id\n    audioLinksByAudioId = db.audio_links.audio_id == search;\n    audio_links = db(audioLinksByAudioId).select()\n\n    # get the audio details for this audio id\n    audioInfoById = db.audio.id == search\n    audio_rs = db(audioInfoById).select()\n    #get the audio information from the returned results\n    audio = audio_rs[0]\n\n    return dict(audio=audio, audio_links=audio_links)\n\ndef urls_by_id():\n    # get the audio id from the request\n    id = request.args[0]\n\n    # get the audio_links which hold the urls\n   # audioLinksByAudioId = db.audio_links.audio_id == id;\n    audio_links = db(db.audio_links.audioid == id).select(limitby=(0,1))\n    urls = []\n\n    for audio_link in audio_links:\n        urls.append(audio_link.url)\n\n    return sj.dumps(urls)\n\nresponse._vars=response._caller(urls_by_id)\n'
p6
sS'traceback'
p7
S'Traceback (most recent call last):\n  File "/home/dave/web2py/gluon/restricted.py", line 184, in restricted\n    exec ccode in environment\n  File "/home/dave/web2py/applications/init/controllers/audio_links.py", line 31, in <module>\n  File "/home/dave/web2py/gluon/globals.py", line 102, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/dave/web2py/applications/init/controllers/audio_links.py", line 23, in urls_by_id\n    audio_links = db(db.audio_links.audioid == id).select(limitby=(0,1))\n  File "/home/dave/web2py/gluon/sql.py", line 1362, in __getattr__\n    return dict.__getitem__(self,key)\nKeyError: \'audioid\'\n'
p8
s.